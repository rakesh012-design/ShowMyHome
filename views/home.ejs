<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/output.css">
  <title>Home</title>
</head>
<body>
  <header class="bg-red-500 flex gap-15 relative">

   <% if(isLoggedIn) {%>
    <% if(user.userType=='Host')  {%>
  <a class="text-3xl text-white font-bold hover:text-black border-2 border-black rounded p-2" href="/host/add-home">Add House</a>
  <% } %>
  <a  class="text-3xl text-white font-bold hover:text-black border-2 border-black rounded p-2" href="/get-favourites">Favourites</a>
  
   <% }%>
  <% if(!isLoggedIn) {%>
  <a  class="text-3xl text-white font-bold hover:text-black border-2 border-black rounded p-2 flex" href="/login">Login</a>
  <% }  else{ %>
      <form action="/logout" method="post">
        <button type="submit" 
        class=
        "text-3xl text-white font-bold hover:text-black border-2 border-black rounded p-2"
        >Logout</button>
      </form>
      <h2 class="text-4xl font-bold text-white flex justify-end p-2"><%= user.userName %></h2>
  <%}%>

  </header>
  <h1 class="text-4xl flex justify-center font-bold">Welcome to AirBnB</h1>
  <h2 class="font-bold flex justify-center text-2xl">Registered Homes</h2>
  <main class="sm:grid sm:grid-cols-4 gap-5 flex flex-col">
    
  
  <% home_details.forEach(home =>{%>
    <div class="flex flex-col justify-center font-bold text-2xl shadow-xl content-around hover:z-10   hover:text-black h-fit">
      <div class="flex justify-center">
        <img class="h-1/2"
        src= "<%= home.ImageUrl %>"
        height="400" width="400"/>
      </div>
      <div class="flex justify-center">
        <%= home.houseName %>
      </div>
      <div class="flex justify-center">
        <%= home.Location %>
      </div>
      <div class="flex justify-center">
        <%= home.price %>$
        
      </div>
        <div class="flex justify-center">
        <%= home.rating %>‚≠ê
        
      </div>
    <div class="flex flex-row justify-start gap-15">
      <% if(isLoggedIn) {%>
    <div>
    <a class="hover:cursor-pointer border-2 rounded bg-amber-400" href="/edit-home/<%=home._id %>?editing=true">Edit</a>
    <form method="post" action="/host/delete-home/<%= home._id %>">
      <button type="submit"  class="border-2 rounded hover:cursor-pointer bg-red-400  font-bold">Delete</button>
    </form>
    
    <a href="/home/<%= home._id%>"  class="border-2 rounded hover:cursor-pointer bg-blue-400  font-bold">Details</a>
    <br>
    <br>
    <form action="/favourites" method="post">
      <button type="submit" class="hover:cursor-pointer  bg-green-500 border-2">Add to Favourites</button>
      <input type="hidden" name="_id" value="<%= home._id %>">
    </form>
    <%}%>
    </div>
    </div>
    </div>
    
  </div>
  
  <%})%>  
  
  </main>
</body>
</html>